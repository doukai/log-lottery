import{b as e,c as l,o as a,e as t,f as o,F as s,y as r,m as u,D as n,s as c,r as d,a8 as i,w as p,h as m,B as v,C as b,z as f,n as C,H as w,E as x,j as g,k as h,a9 as y,aa as k,t as L}from"./chunk-BJzlS2Df.js";import{a as V,u as P,i as _,e as T}from"./chunk-CJjcFb_J.js";const U={class:"w-full h-auto"},S=["onClick"],z=V(e({__name:"PatternSetting",props:{rowCount:{type:Number,default:17},cardColor:{type:String,default:"#fff"},patternColor:{type:String,default:"#000"},patternList:{type:Array,default:()=>[]}},setup(e){const c=e,d=l((()=>c));return(e,l)=>(a(),t("div",U,[o("ul",{class:"pattern-list",style:n({gridTemplateColumns:"repeat("+d.value.rowCount+",1fr)"})},[(a(!0),t(s,null,r(7*d.value.rowCount,(e=>(a(),t("li",{onClick:u((l=>((e,l)=>{if(d.value.patternList.includes(l)){const e=d.value.patternList.indexOf(l);d.value.patternList.splice(e,1)}else d.value.patternList.push(l)})(0,e)),["stop"]),class:"w-5 h-5",key:e,style:n({backgroundColor:d.value.patternList.includes(e)?d.value.patternColor:d.value.cardColor})},null,12,S)))),128))],4)]))}}),[["__scopeId","data-v-be6d21c1"]]),R={class:"modal-box"},j={class:"modal-action"},A={method:"dialog",class:"flex gap-3"},D={class:"mb-8"},I={class:"flex flex-row items-center w-full gap-24 mb-10 form-control"},B={class:""},N={class:"flex flex-row items-center w-full gap-24 mb-10 form-control"},F={class:""},O={class:"help"},q={key:0,class:"text-sm text-red-400 help-text"},E={class:"tooltip","data-tip":"该项比较耗费时间和性能"},H=["disabled"],M={class:"loading loading-ring loading-md"},G={class:"w-full max-w-xs form-control"},J=["value"],K={class:"w-full max-w-xs form-control"},Q=["value"],W={class:"w-full max-w-xs form-control"},X={class:"w-full max-w-xs form-control"},Y={class:"w-full max-w-xs form-control"},Z={class:"flex flex-row w-full max-w-xs gap-10 mb-10 form-control"},$={class:"w-full max-w-xs mb-10 form-control"},ee={class:"w-full max-w-xs form-control"},le={class:"flex flex-row items-center w-full gap-24 mb-0 form-control"},ae={class:"h-auto"},te={class:"flex w-full h-24 gap-3 m-0"},oe={class:"w-full max-w-xs mb-10 form-control"},se=["checked"],re=e({__name:"FaceConfig",setup(e){const l=P().globalConfig,n=P().personConfig,V=P().prizeConfig,{getTopTitle:U,getTheme:S,getPatterColor:re,getPatternList:ue,getCardColor:ne,getLuckyColor:ce,getTextColor:de,getCardSize:ie,getTextSize:pe,getRowCount:me,getIsShowPrizeList:ve,getBackground:be,getImageList:fe}=c(l),{getAlreadyPersonList:Ce,getNotPersonList:we}=c(n),xe=d(),ge=d(),he=d(0),ye=d(S.value.name),ke=d(structuredClone(U.value)),Le=d(structuredClone(ne.value)),Ve=d(structuredClone(ce.value)),Pe=d(structuredClone(de.value)),_e=d(structuredClone(ie.value)),Te=d(structuredClone(pe.value)),Ue=d(structuredClone(me.value)),Se=d(structuredClone(ve.value)),ze=d(structuredClone(re.value)),Re=d(Object.keys(k)),je=d(k),Ae=d(be.value),De=d({rowCount:Ue}),Ie=d({rowCount:""}),Be=i.object({rowCount:i.number({required_error:"必填项",invalid_type_error:"必须填入数字"}).min(1,"最小为1").max(100,"最大为100")}),Ne={rowCount:De.value.rowCount},Fe=()=>{he.value=2,setTimeout((()=>{const e=Ce.value.length,l=we.value.length;if(e<=0&&l<=0)return;const a=Ce.value.concat(we.value),t=a.slice(0,e),o=a.slice(e,l+e);n.deleteAllPerson(),n.addNotPersonList(o),n.addAlreadyPersonList(t,null),he.value=0}),1e3)},Oe=()=>{l.setPatternList([])},qe=()=>{l.resetPatternList()},Ee=()=>{l.reset(),n.reset(),V.resetDefault(),window.location.reload()};return p((()=>De.value.rowCount),(()=>{var e;Ne.rowCount=De.value.rowCount,(e=Ne,Be.parseAsync(e)).then((e=>{e.rowCount&&(he.value=1,l.setRowCount(e.rowCount))})).catch((e=>{Ie.value.rowCount=e.issues[0].message}))})),p(ke,(e=>{l.setTopTitle(e)})),p(ye,(e=>{const a=je.value[e];l.setTheme({name:e,detail:a}),L.themeChange(e),a.primary&&(_(a.primary)||T(a.primary))&&l.setCardColor(a.primary)}),{deep:!0}),p(Le,(e=>{l.setCardColor(e)}),{deep:!0}),p(Ve,(e=>{l.setLuckyCardColor(e)}),{deep:!0}),p(ze,(e=>{l.setPatterColor(e)})),p(Pe,(e=>{l.setTextColor(e)}),{deep:!0}),p(_e,(e=>{l.setCardSize(e)}),{deep:!0}),p(Se,(()=>{l.setIsShowPrizeList(Se.value)})),p(Ae,(e=>{l.setBackground(e)})),m((()=>{})),(e,l)=>(a(),t(s,null,[o("dialog",{id:"my_modal_1",ref_key:"resetDataDialogRef",ref:ge,class:"border-none modal"},[o("div",R,[l[18]||(l[18]=o("h3",{class:"text-lg font-bold"},"提示!",-1)),l[19]||(l[19]=o("p",{class:"py-4"},"该操作会重置所有数据，是否继续？",-1)),o("div",j,[o("form",A,[o("button",{class:"btn",onClick:l[0]||(l[0]=e=>ge.value.close())},"取消"),o("button",{class:"btn",onClick:Ee},"确定")])])])],512),o("div",null,[l[38]||(l[38]=o("h2",null,"全局配置",-1)),o("div",D,[o("button",{class:"btn btn-sm btn-primary",onClick:l[1]||(l[1]=e=>ge.value.showModal())},"重置所有数据")]),o("label",I,[o("div",B,[l[20]||(l[20]=o("div",{class:"label"},[o("span",{class:"label-text"},"标题")],-1)),v(o("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=e=>ke.value=e),placeholder:"输入标题",class:"w-full max-w-xs input input-bordered"},null,512),[[b,ke.value]])])]),o("label",N,[o("div",F,[l[21]||(l[21]=o("div",{class:"label"},[o("span",{class:"label-text"},"列数")],-1)),v(o("input",{type:"number","onUpdate:modelValue":l[3]||(l[3]=e=>De.value.rowCount=e),placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[b,De.value.rowCount]]),o("div",O,[Ie.value.rowCount?(a(),t("span",q,f(Ie.value.rowCount),1)):C("",!0)])]),o("div",null,[o("div",E,[o("button",{class:"mt-5 btn btn-info btn-sm",disabled:1!=he.value,onClick:Fe},[l[22]||(l[22]=o("span",null,"重设布局",-1)),v(o("span",M,null,512),[[w,2==he.value]])],8,H)])])]),o("label",G,[l[24]||(l[24]=o("div",{class:"label"},[o("span",{class:"label-text"},"选择主题")],-1)),v(o("select",{"data-choose-theme":"",class:"w-full max-w-xs border-solid select border-1","onUpdate:modelValue":l[4]||(l[4]=e=>ye.value=e)},[l[23]||(l[23]=o("option",{disabled:"",selected:""},"选取主题",-1)),(a(!0),t(s,null,r(Re.value,((e,l)=>(a(),t("option",{key:l,value:e},f(e),9,J)))),128))],512),[[x,ye.value]])]),o("label",K,[l[26]||(l[26]=o("div",{class:"label"},[o("span",{class:"label-text"},"选择背景图片")],-1)),v(o("select",{"data-choose-theme":"",class:"w-full max-w-xs border-solid select border-1","onUpdate:modelValue":l[5]||(l[5]=e=>Ae.value=e)},[l[25]||(l[25]=o("option",{disabled:"",selected:""},"选取背景图片",-1)),(a(!0),t(s,null,r([{name:"无",url:"",id:""},...g(fe)],((e,l)=>(a(),t("option",{key:l,value:e},f(e.name),9,Q)))),128))],512),[[x,Ae.value]])]),o("label",W,[l[27]||(l[27]=o("div",{class:"label"},[o("span",{class:"label-text"},"卡片颜色")],-1)),h(g(y),{ref_key:"colorPickerRef",ref:xe,modelValue:Le.value,"onUpdate:modelValue":l[6]||(l[6]=e=>Le.value=e),"pure-color":Le.value,"onUpdate:pureColor":l[7]||(l[7]=e=>Le.value=e)},null,8,["modelValue","pure-color"])]),o("label",X,[l[28]||(l[28]=o("div",{class:"label"},[o("span",{class:"label-text"},"中奖卡片颜色")],-1)),h(g(y),{ref_key:"colorPickerRef",ref:xe,modelValue:Ve.value,"onUpdate:modelValue":l[8]||(l[8]=e=>Ve.value=e),"pure-color":Ve.value,"onUpdate:pureColor":l[9]||(l[9]=e=>Ve.value=e)},null,8,["modelValue","pure-color"])]),o("label",Y,[l[29]||(l[29]=o("div",{class:"label"},[o("span",{class:"label-text"},"文字颜色")],-1)),h(g(y),{ref_key:"colorPickerRef",ref:xe,modelValue:Pe.value,"onUpdate:modelValue":l[10]||(l[10]=e=>Pe.value=e),"pure-color":Pe.value,"onUpdate:pureColor":l[11]||(l[11]=e=>Pe.value=e)},null,8,["modelValue","pure-color"])]),o("label",Z,[o("div",null,[l[30]||(l[30]=o("div",{class:"label"},[o("span",{class:"label-text"},"卡片宽度")],-1)),v(o("input",{type:"number","onUpdate:modelValue":l[12]||(l[12]=e=>_e.value.width=e),placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[b,_e.value.width]])]),o("div",null,[l[31]||(l[31]=o("div",{class:"label"},[o("span",{class:"label-text"},"卡片高度")],-1)),v(o("input",{type:"number","onUpdate:modelValue":l[13]||(l[13]=e=>_e.value.height=e),placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[b,_e.value.height]])])]),o("label",$,[l[32]||(l[32]=o("div",{class:"label"},[o("span",{class:"label-text"},"文字大小")],-1)),v(o("input",{type:"number","onUpdate:modelValue":l[14]||(l[14]=e=>Te.value=e),placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[b,Te.value]])]),o("label",ee,[l[33]||(l[33]=o("div",{class:"label"},[o("span",{class:"label-text"},"高亮颜色")],-1)),h(g(y),{ref_key:"colorPickerRef",ref:xe,modelValue:ze.value,"onUpdate:modelValue":l[15]||(l[15]=e=>ze.value=e),"pure-color":ze.value,"onUpdate:pureColor":l[16]||(l[16]=e=>ze.value=e)},null,8,["modelValue","pure-color"])]),o("label",le,[o("div",null,[l[34]||(l[34]=o("div",{class:"label"},[o("span",{class:"label-text"},"图案设置")],-1)),o("div",ae,[h(z,{rowCount:g(me),cardColor:g(ne),patternColor:g(re),patternList:g(ue)},null,8,["rowCount","cardColor","patternColor","patternList"])])])]),o("div",te,[o("button",{class:"mt-5 btn btn-info btn-sm",onClick:u(Oe,["stop"])},l[35]||(l[35]=[o("span",null,"清空图案设置",-1)])),o("div",{class:"tooltip","data-tip":"默认图案设置针对17列时有效，其他列数请自行设置"},[o("button",{class:"mt-5 btn btn-info btn-sm",onClick:qe},l[36]||(l[36]=[o("span",null,"默认图案设置",-1)]))])]),o("label",oe,[l[37]||(l[37]=o("div",{class:"label"},[o("span",{class:"label-text"},"是否常显奖品列表")],-1)),o("input",{type:"checkbox",checked:Se.value,onChange:l[17]||(l[17]=e=>Se.value=!Se.value),class:"mt-2 border-solid checkbox checkbox-secondary border-1"},null,40,se)])])],64))}});export{re as default};
